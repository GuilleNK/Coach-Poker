<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coach de Poker</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background: #f5f5f5;
      color: #333;
    }
    h2 {
      margin-bottom: 1rem;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin: 0.5rem 0;
    }
    button {
      padding: 0.5rem 1rem;
      border: none;
      background-color: #4caf50;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    const trees = {
      CO: {
        position: "CO",
        situation: "vs Straddle call, flop dry",
        flop: "8c 4s 2d",
        stack: "100bb",
        in_position: false,
        has_initiative: true,
        action: {
          question: "Flop: 8♣ 4♠ 2♦. Tenés la iniciativa pero estás fuera de posición. ¿Qué hacés?",
          options: {
            "Cbet 1/3 pot": {
              result: "Villano puede foldear, pagar o hacer raise.",
              next: {
                "Fold": "Ganás el bote. Nodo terminal.",
                "Call": {
                  turn: "Nodo de turn por definir (según carta)."
                },
                "Raise": {
                  response: "¿Qué hacés frente a raise?",
                  options: {
                    "Fold": "Nodo terminal. Cedés el bote.",
                    "Call": "Vas al turn con SPR más chico.",
                    "3bet shove": "Agresivo: sólo con top range o semibluffs."
                  }
                }
              }
            },
            "Check": {
              result: "Villano puede apostar o chequear. Se pierde iniciativa."
            },
            "Overbet": {
              result: "Línea no estándar. Rara vez usada en este board."
            }
          }
        }
      }

      // Más árboles por posición se agregan acá (BTN, SB, etc.)
    };

    const app = document.getElementById("app");

    function renderStartScreen() {
      app.innerHTML = "<h2>¿Desde qué posición estás jugando esta mano?</h2>";

      const positions = ["UTG", "UTG+1", "MP", "HJ", "CO", "BTN", "SB", "BB"];
      const list = document.createElement("ul");

      positions.forEach(pos => {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.innerText = pos;
        btn.onclick = () => {
          if (trees[pos]) {
            renderNode(trees[pos]);
          } else {
            app.innerHTML = `<p>Aún no cargamos decisiones para ${pos}. Pronto lo agregaremos.</p><button onclick="renderStartScreen()">Volver</button>`;
          }
        };
        li.appendChild(btn);
        list.appendChild(li);
      });

      app.appendChild(list);
    }

    function renderNode(node) {
      app.innerHTML = "";

      const question = document.createElement("h2");
      question.innerText = node.action.question;
      app.appendChild(question);

      const list = document.createElement("ul");

      for (const [option, result] of Object.entries(node.action.options)) {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.innerText = option;
        btn.onclick = () => {
          showResult(result, node);
        };
        li.appendChild(btn);
        list.appendChild(li);
      }

      app.appendChild
